<template>
    <div class="container mt-16 text-main-text">
        <div class="flex flex-col md:flex-row items-center md:items-start md:justify-between">
            <div class="w-3/4" data-aos="zoom-out-right">
                <!-- Directors  -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6" data-aos="zoom-out-left">
                    <div class="flex flex-col items-center">
                        <div class="w-full">
                            <img src="@/assets/images/elnur-vahabov.jpeg" alt="" class="mb-3 rounded-2xl w-full h-full object-cover">
                        </div>
                        <h5 class="font-bold text-main-text text-md md:text-xl">Direktor</h5>
                        <h5 class="font-semibold text-main-text text-md md:text-xl">Dr.Elnur Vahabov</h5>
                    </div>
                    <div class="flex flex-col items-center">
                        <div>
                            <img src="@/assets/images/sevda-ceferova.jpeg" alt="" class="mb-3 rounded-2xl w-full h-full object-cover">
                        </div>
                        <h5 class="font-bold text-main-text text-md md:text-xl">Tibbi Direktor</h5>
                        <h5 class="font-semibold text-main-text text-md md:text-xl">MD., PhD., MBA., MSc HM., UN Physician</h5>
                        <h5 class="font-semibold text-main-text text-md md:text-xl">Dr.Sevda CÉ™fÉ™rova</h5>
                    </div>
                    <div></div>
                 </div>
                 <h1 class="text-main-text text-lg md:text-2xl font-bold my-4">Leyla Medical Center-in Direktor Kabineti ilÉ™ É™laqÉ™ formasÄ±</h1>
                <p class="text-main-text text-base">Biz daima inkiÅŸafdayÄ±q. Bizim Ã¼Ã§Ã¼n sizin rahatlÄ±ÄŸÄ±nÄ±z vÉ™ bizdÉ™n razÄ±lÄ±ÄŸÄ±nÄ±z Ã§ox vacibdir. Sizi narahat edÉ™n bir ÅŸey olduÄŸu halda biz onu mÃ¼tlÉ™q aradan qaldÄ±rmaÄŸa hazÄ±rÄ±q. Ã–z tÉ™klifinizi vÉ™ ya ÅŸikayÉ™tinizi aÅŸaÄŸÄ±dakÄ± formanÄ± doldurmaÄŸla Leyla Medical Center-in direktoruna mÉ™ruzÉ™ edÉ™ bilÉ™rsiniz.</p>
                <div class="mt-5">
                    <div class="flex items-center mb-2">
                        <i class="fa-solid fa-phone mr-2"></i>
                        <span>(012) 490 21 31</span>
                    </div>
                    <div class="flex items-center mb-2">
                        <i class="fa-solid fa-phone mr-2"></i>
                        <span>(012) 490 18 58</span>
                    </div>
                    <div class="flex items-center mb-2">
                        <i class="fa-solid fa-phone mr-2"></i>
                        <span>(+994 50) 225 73 30</span>
                    </div>
                    <div>
                        <i class="fa-solid fa-location-dot mr-2"></i>
                        <span>XÉ™tai rayonu, Yusif SÉ™fÉ™rov kÃ¼Ã§.19</span>
                    </div>
                </div>

                <form @submit.prevent="submitForm" class="flex flex-col lg:flex-row lg:flex-wrap gap-4 mt-5">
                    <div class="flex flex-col w-full lg:w-1/2">
                        <label for="patient_fullname" class="mb-2">Ad vÉ™ Soyad</label>
                        <input v-model="patient_fullname" type="text" id="patient_fullname" class="border border-gray-300 p-2 rounded-md" required>
                    </div>
                    <div class="relative flex flex-col w-full lg:w-1/2">
                        <!-- Ã–lkÉ™ kodu seÃ§imi (absolute) -->
                        <select
                        v-model="selectedCountry"
                        class="absolute inset-y-0 left-0 pl-2 pr-6 border-r border-gray-300 bg-transparent focus:outline-none appearance-none"
                        >
                        <option
                            v-for="country in countries"
                            :key="country.code"
                            :value="country"
                        >
                            {{ country.flag }} {{ country.dial_code }}
                        </option>
                        </select>

                        <!-- Telefon nÃ¶mrÉ™si Ã¼Ã§Ã¼n input -->
                        <input
                        type="text"
                        v-model="patient_phone_number"
                        @input="onInput"
                        class="w-full pl-24 pr-2 py-2 border border-gray-300 rounded focus:outline-none"
                        placeholder="Telefon nÃ¶mrÉ™si"
                        />
                    </div>
                    <div class="flex flex-col w-full lg:w-1/2">
                        <label for="e_mail" class="mb-2">Elektron Ãœnvan</label>
                        <input v-model="e_mail" type="email" id="e_mail" class="border border-gray-300 p-2 rounded-md" required>
                    </div>
                    <div class="flex flex-col w-full lg:w-1/2">
                        <label for="patient_comment" class="mb-2">TÉ™klif vÉ™ ÅikayÉ™t</label>
                        <textarea v-model="patient_comment" id="patient_comment" rows="4" class="border border-gray-300 p-2 rounded-md" required></textarea>
                    </div>
                    <div class="w-full">
                        <button type="submit" class="greenBtn mt-4">GÃ¶ndÉ™r</button>
                    </div>
                </form>

                <div v-if="formSubmitted" class="mt-4">
                    <p v-if="formSuccess" class="text-green-500">Form uÄŸurla gÃ¶ndÉ™rildi!</p>
                    <p v-else class="text-red-500">{{ formError }}</p>
                </div>
            </div>
            <div class="w-[310px] mt-10 md:mt-0 md:ml-4 2xl:ml-0" data-aos="zoom-in-left">
                <SideBanners class="mb-4" /> 
                <SideBanners2 class="mb-4" /> 
            </div>
        </div>

        <Maps class="mt-24"/>
    </div>
</template>

<script setup>
import { ref, onMounted } from 'vue';
import axios from 'axios';
import SideBanners from "@/components/SideBanners.vue";
import SideBanners2 from "@/components/SideBanners2.vue";
import Maps from "@/components/Maps.vue";
import { useHead } from '@vueuse/head';
import Swal from 'sweetalert2'; 

// SÉ™hifÉ™ baÅŸlÄ±ÄŸÄ±nÄ± bir dÉ™yiÅŸÉ™ndÉ™ saxlayÄ±rÄ±q
const pageTitle = ref('Direktor Kabineti');

const countries = ref([
  { name: 'AzÉ™rbaycan', dial_code: '+994', code: 'AZ', flag: 'ğŸ‡¦ğŸ‡¿' },
  { name: 'TÃ¼rkiye', dial_code: '+90', code: 'TR', flag: 'ğŸ‡¹ğŸ‡·' },
  { name: 'Rusiya', dial_code: '+7', code: 'RU', flag: 'ğŸ‡·ğŸ‡º' },
  { name: 'ABÅ', dial_code: '+1', code: 'US', flag: 'ğŸ‡ºğŸ‡¸' },
  { name: 'Ã–zbÉ™kistan', dial_code: '+998', code: 'UZ', flag: 'ğŸ‡ºğŸ‡¿' },
  { name: 'GÃ¼rcÃ¼stan', dial_code: '+995', code: 'GE', flag: 'ğŸ‡¬ğŸ‡ª' },
  { name: 'TÃ¼rkmÉ™nistan', dial_code: '+993', code: 'TM', flag: 'ğŸ‡¹ğŸ‡²' },
]);

const selectedCountry = ref(countries.value[0]);
const patient_fullname = ref('');
const patient_phone_number = ref('');
const e_mail = ref('');
const patient_comment = ref('');
const formSubmitted = ref(false);
const formSuccess = ref(false);
const formError = ref('');

const onInput = (event) => {
  patient_phone_number.value = event.target.value.replace(/\D/g, ''); // YalnÄ±z rÉ™qÉ™mlÉ™ri saxla
};

const submitForm = async () => {
  // Formu yoxlayaq
  if (!patient_fullname.value.trim()) {
    Swal.fire({
      title: 'DiqqÉ™t!',
      text: 'ZÉ™hmÉ™t olmasa, adÄ±nÄ±zÄ± vÉ™ soyadÄ±nÄ±zÄ± daxil edin',
      icon: 'warning',
      confirmButtonColor: '#36A873'
    });
    return;
  }

  if (!patient_phone_number.value.trim()) {
    Swal.fire({
      title: 'DiqqÉ™t!',
      text: 'ZÉ™hmÉ™t olmasa, telefon nÃ¶mrÉ™nizi daxil edin',
      icon: 'warning',
      confirmButtonColor: '#36A873'
    });
    return;
  }

  if (!e_mail.value.trim() || !e_mail.value.includes('@')) {
    Swal.fire({
      title: 'DiqqÉ™t!',
      text: 'ZÉ™hmÉ™t olmasa, dÃ¼zgÃ¼n e-poÃ§t Ã¼nvanÄ± daxil edin',
      icon: 'warning',
      confirmButtonColor: '#36A873'
    });
    return;
  }

  if (!patient_comment.value.trim()) {
    Swal.fire({
      title: 'DiqqÉ™t!',
      text: 'ZÉ™hmÉ™t olmasa, tÉ™klif vÉ™ ya ÅŸikayÉ™tinizi daxil edin',
      icon: 'warning',
      confirmButtonColor: '#36A873'
    });
    return;
  }

  try {
    const fullPhoneNumber = `${selectedCountry.value.dial_code}${patient_phone_number.value}`;
    
    // Loading bildiriÅŸi gÃ¶stÉ™rÉ™k
    Swal.fire({
      title: 'GÃ¶ndÉ™rilir...',
      text: 'ZÉ™hmÉ™t olmasa, gÃ¶zlÉ™yin',
      icon: 'info',
      allowOutsideClick: false,
      showConfirmButton: false,
      didOpen: () => {
        Swal.showLoading();
      }
    });
    
    const response = await axios.post('https://bytexerp.online/api/leyla/v1/directoroffice-api/', {
      patient_fullname: patient_fullname.value,
      patient_phone_number: fullPhoneNumber,
      e_mail: e_mail.value,
      patient_comment: patient_comment.value,
    });

    if (response.status === 201) {
      // UÄŸurlu gÃ¶ndÉ™rmÉ™ mesajÄ±
      Swal.fire({
        title: 'UÄŸurlu!',
        text: 'MÃ¼raciÉ™tiniz uÄŸurla gÃ¶ndÉ™rildi. Æn qÄ±sa zamanda sizinlÉ™ É™laqÉ™ saxlanÄ±lacaq.',
        icon: 'success',
        confirmButtonText: 'BaÄŸla',
        confirmButtonColor: '#36A873'
      });
      
      // Formu tÉ™mizlÉ™mÉ™k
      patient_fullname.value = '';
      patient_phone_number.value = '';
      e_mail.value = '';
      patient_comment.value = '';
    }
  } catch (error) {
    // XÉ™ta mesajÄ±
    Swal.fire({
      title: 'XÉ™ta!',
      text: 'MÃ¼raciÉ™tinizi gÃ¶ndÉ™rÉ™rkÉ™n xÉ™ta baÅŸ verdi. ZÉ™hmÉ™t olmasa, yenidÉ™n cÉ™hd edin.',
      icon: 'error',
      confirmButtonText: 'YenidÉ™n cÉ™hd et',
      confirmButtonColor: '#d33'
    });
    
    console.error('Form submission error:', error);
  }
};

// SEO meta mÉ™lumatlarÄ±
onMounted(() => {
  setupSEO();
});

// SEO mÉ™lumatlarÄ±nÄ± yenilÉ™mÉ™k Ã¼Ã§Ã¼n funksiya
const setupSEO = () => {
  useHead({
    title: `Leyla Medical Center | ${pageTitle.value}`,
    meta: [
      { 
        name: 'description', 
        content: 'Leyla Medical Center-in Direktor Kabineti ilÉ™ É™laqÉ™ saxlayÄ±n. Ã–z tÉ™klif vÉ™ ÅŸikayÉ™tlÉ™rinizi birbaÅŸa klinika rÉ™hbÉ™rliyinÉ™ Ã§atdÄ±rÄ±n. KeyfiyyÉ™tli tibbi xidmÉ™t Ã¼Ã§Ã¼n mÃ¼raciÉ™t edin.' 
      },
      { 
        name: 'keywords', 
        content: 'leyla medical center, direktor kabineti, tÉ™klif vÉ™ ÅŸikayÉ™t, É™laqÉ™, tibb mÉ™rkÉ™zi, elnur vahabov, sevda cÉ™fÉ™rova, tibb direktoru, pasiyent É™laqÉ™ formasÄ±, klinika rÉ™hbÉ™rliyi' 
      },
      // Open Graph meta taglarÄ± - URL yolunu yenilÉ™yirik
      { 
        property: 'og:title', 
        content: `Leyla Medical Center | ${pageTitle.value}` 
      },
      { 
        property: 'og:description', 
        content: 'Leyla Medical Center-in Direktor Kabineti ilÉ™ É™laqÉ™ saxlayÄ±n. Ã–z tÉ™klif vÉ™ ÅŸikayÉ™tlÉ™rinizi birbaÅŸa klinika rÉ™hbÉ™rliyinÉ™ Ã§atdÄ±rÄ±n.'
      },
      { property: 'og:type', content: 'website' },
      // Yeni URL strukturu
      { property: 'og:url', content: 'https://leylamc.com/az/haqqÄ±mÄ±zda/direktor-kabineti' },
      { property: 'og:image', content: 'https://leylamc.com/images/director-office.jpg' },
      { property: 'og:site_name', content: 'Leyla Medical Center' },
      { property: 'og:locale', content: 'az_AZ' },
      
      // Twitter meta taglarÄ±
      { name: 'twitter:card', content: 'summary_large_image' },
      { name: 'twitter:title', content: `Leyla Medical Center | ${pageTitle.value}` },
      { 
        name: 'twitter:description', 
        content: 'Leyla Medical Center-in Direktor Kabineti ilÉ™ É™laqÉ™ saxlayÄ±n. Ã–z tÉ™klif vÉ™ ÅŸikayÉ™tlÉ™rinizi birbaÅŸa klinika rÉ™hbÉ™rliyinÉ™ Ã§atdÄ±rÄ±n.'
      },
      { name: 'twitter:image', content: 'https://leylamc.com/images/director-office.jpg' },
      
      // Strukturlu mÉ™lumatlarÄ± É™lavÉ™ etmÉ™k (Schema.org)
      {
        name: 'script',
        type: 'application/ld+json',
        children: JSON.stringify({
          "@context": "https://schema.org",
          "@type": "MedicalOrganization",
          "name": "Leyla Medical Center",
          // Yeni URL strukturu
          "url": "https://leylamc.com/az/haqqÄ±mÄ±zda/direktor-kabineti",
          "logo": {
            "@type": "ImageObject",
            "url": "https://leylamc.com/images/logo.png"
          },
          "address": {
            "@type": "PostalAddress",
            "streetAddress": "Yusif SÉ™fÉ™rov kÃ¼Ã§.19",
            "addressLocality": "XÉ™tai rayonu, BakÄ±",
            "addressCountry": "AzÉ™rbaycan"
          },
          "contactPoint": {
            "@type": "ContactPoint",
            "telephone": "+994124902131",
            "contactType": "customer service"
          },
          "employee": [
            {
              "@type": "Person",
              "name": "Dr. Elnur Vahabov",
              "jobTitle": "Direktor"
            },
            {
              "@type": "Person",
              "name": "Dr. Sevda CÉ™fÉ™rova",
              "jobTitle": "Tibbi Direktor",
              "honorificSuffix": "MD., PhD., MBA., MSc HM., UN Physician"
            }
          ]
        })
      }
    ],
    // Canonical link-dÉ™ URL-i yenilÉ™yirik
    link: [
      { rel: 'canonical', href: 'https://leylamc.com/az/haqqÄ±mÄ±zda/direktor-kabineti' }
    ]
  });
};
</script>

<style scoped>
p{
    text-align: justify;
}

</style>